(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{409:function(t,s,e){"use strict";e.r(s);var a=e(54),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",[t._v("Adding Users to User Groups using SSO/SAML")]),t._v(" "),e("p",[t._v("Attributes within the SAML Response Assertions can be mapped to automatically add the users logging-in to a\nmatching Craft User Group.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("The Craft User Groups must already exist in Craft since these are managed with the project config. Automatic\ngroup creation is not possible.")]),t._v(" "),e("p",[t._v("Furthermore, Assigning admin permission without Craft User Group assignment is not supported through the plugin.")])]),t._v(" "),e("p",[t._v("Since the User Group must already exist, assign the permissions accordingly.")]),t._v(" "),e("h2",{attrs:{id:"user-group-saml-sp-configs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user-group-saml-sp-configs"}},[t._v("#")]),t._v(" User Group SAML SP Configs")]),t._v(" "),e("h3",{attrs:{id:"map-the-user-group"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#map-the-user-group"}},[t._v("#")]),t._v(" Map the User Group")]),t._v(" "),e("p",[t._v("By default, the attribute the plugin looks for is "),e("code",[t._v("groups")]),t._v(". When an attribute name is found in an assertion\nmatching "),e("code",[t._v("groups")]),t._v(", a lookup to done to match the value of that attribute with the "),e("em",[t._v("handle")]),t._v(" of the existing group.")]),t._v(" "),e("p",[t._v("If the value of this attribute doesn't match the handle exactly, the lookup with fail and the user will not be assigned.")]),t._v(" "),e("p",[t._v("Here is how to overwrite this setting in the "),e("code",[t._v("config/saml-sp.php")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'groupAttributeNames'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'MyUserGroupAttributeName'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"merging-the-user-s-existing-groups"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#merging-the-user-s-existing-groups"}},[t._v("#")]),t._v(" Merging the User's Existing Groups")]),t._v(" "),e("p",[t._v("By default, the existing groups the user is assigned to will be merged into the ones that  are found in the Response\nAssertions. You can modify this behavior by setting "),e("code",[t._v("mergeExistingGroups")]),t._v(" in the "),e("code",[t._v("config/saml-sp.php")]),t._v(" to false.")]),t._v(" "),e("blockquote",[e("p",[t._v("WARNING: If you set this config to false, the user groups will be FULLY MANAGED by SSO/SAML. This includes removing\ngroups when the attribute is not found or when the attribute is empty.")])]),t._v(" "),e("p",[t._v("Example "),e("code",[t._v("config/saml-sp.php")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'mergeExistingGroups'")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),e("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"adding-a-default-group"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#adding-a-default-group"}},[t._v("#")]),t._v(" Adding a Default Group")]),t._v(" "),e("p",[t._v("Using the "),e("code",[t._v("defaultGroupAssignments")]),t._v(" property, you can add groups to everyone logging-in through SSO automatically. This\nproperty is a list of User Group ids.")]),t._v(" "),e("p",[t._v("Example "),e("code",[t._v("config/saml-sp.php")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'defaultGroupAssignments'")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"customizing-groups-assignments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#customizing-groups-assignments"}},[t._v("#")]),t._v(" Customizing Groups Assignments")]),t._v(" "),e("p",[t._v("If the existing group configs don't fit your business case, evaluate the\n"),e("RouterLink",{attrs:{to:"/configure/events.html#assign-user-to-a-user-group-based-on-a-property"}},[t._v("events examples")])],1)])}),[],!1,null,null,null);s.default=n.exports}}]);