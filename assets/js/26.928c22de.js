(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{320:function(t,s,e){"use strict";e.r(s);var a=e(14),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",[t._v("Adding Users to User Groups using SSO/SAML")]),t._v(" "),s("p",[t._v("Attributes within the SAML Response Assertions can be mapped to automatically add the users logging-in to a\nmatching Craft User Group.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("The Craft User Groups must already exist in Craft since these are managed with the project config. Automatic\ngroup creation is not possible.")]),t._v(" "),s("p",[t._v("Furthermore, Assigning admin permission without Craft User Group assignment is not supported through the plugin.")])]),t._v(" "),s("p",[t._v("Since the User Group must already exist, assign the permissions accordingly.")]),t._v(" "),s("h2",{attrs:{id:"user-group-saml-sp-configs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-group-saml-sp-configs"}},[t._v("#")]),t._v(" User Group SAML SP Configs")]),t._v(" "),s("h3",{attrs:{id:"map-the-user-group"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#map-the-user-group"}},[t._v("#")]),t._v(" Map the User Group")]),t._v(" "),s("p",[t._v("By default, the attribute the plugin looks for is "),s("code",[t._v("groups")]),t._v(". When an attribute name is found in an assertion\nmatching "),s("code",[t._v("groups")]),t._v(", a lookup to done to match the value of that attribute with the "),s("em",[t._v("handle")]),t._v(" of the existing group.")]),t._v(" "),s("p",[t._v("If the value of this attribute doesn't match the handle exactly, the lookup with fail and the user will not be assigned.")]),t._v(" "),s("p",[t._v("Here is how to overwrite this setting in the "),s("code",[t._v("config/saml-sp.php")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'groupAttributeNames'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'MyUserGroupAttributeName'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"merging-the-user-s-existing-groups"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#merging-the-user-s-existing-groups"}},[t._v("#")]),t._v(" Merging the User's Existing Groups")]),t._v(" "),s("p",[t._v("By default, the existing groups the user is assigned to will be merged into the ones that  are found in the Response\nAssertions. You can modify this behavior by setting "),s("code",[t._v("mergeExistingGroups")]),t._v(" in the "),s("code",[t._v("config/saml-sp.php")]),t._v(" to false.")]),t._v(" "),s("blockquote",[s("p",[t._v("WARNING: If you set this config to false, the user groups will be FULLY MANAGED by SSO/SAML. This includes removing\ngroups when the attribute is not found or when the attribute is empty.")])]),t._v(" "),s("p",[t._v("Example "),s("code",[t._v("config/saml-sp.php")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'mergeExistingGroups'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"adding-a-default-group"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-a-default-group"}},[t._v("#")]),t._v(" Adding a Default Group")]),t._v(" "),s("p",[t._v("Using the "),s("code",[t._v("defaultGroupAssignments")]),t._v(" property, you can add groups to everyone logging-in through SSO automatically. This\nproperty is a list of User Group ids.")]),t._v(" "),s("p",[t._v("Example "),s("code",[t._v("config/saml-sp.php")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'defaultGroupAssignments'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"customizing-groups-assignments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#customizing-groups-assignments"}},[t._v("#")]),t._v(" Customizing Groups Assignments")]),t._v(" "),s("p",[t._v("If the existing group configs don't fit your business case, evaluate the\n"),s("RouterLink",{attrs:{to:"/configure/events.html#assign-user-to-a-user-group-based-on-a-property"}},[t._v("events examples")])],1)])}),[],!1,null,null,null);s.default=n.exports}}]);